Le champ `securityContext` dans Kubernetes est utilis√© pour d√©finir des param√®tres de s√©curit√© au niveau d‚Äôun **Pod** ou d‚Äôun **conteneur**. Il permet de configurer des aspects comme les UID/GID, les capacit√©s Linux, le mode privil√©gi√©, etc.

## üìå Niveau Pod vs Niveau Conteneur

* `securityContext` au **niveau Pod** s‚Äôapplique √† **tous les conteneurs** du Pod.
* `securityContext` au **niveau conteneur** s‚Äôapplique **uniquement √† ce conteneur** et peut **√©craser** les valeurs du niveau Pod.

---

## üß™ Exemple de `securityContext` au niveau Pod

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: pod-securise
spec:
  securityContext:
    runAsUser: 1000
    runAsGroup: 3000
    fsGroup: 2000
  containers:
  - name: app
    image: busybox
    command: ["sleep", "3600"]
```

### Explication :

* `runAsUser`: tous les conteneurs tourneront en tant qu'utilisateur UID `1000`.
* `runAsGroup`: GID principal du processus est `3000`.
* `fsGroup`: les fichiers mont√©s (comme les volumes) auront ce GID pour les permissions de groupe.

---

## üß™ Exemple de `securityContext` au niveau conteneur

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: pod-conteneur-securise
spec:
  containers:
  - name: app
    image: busybox
    command: ["sleep", "3600"]
    securityContext:
      privileged: false
      allowPrivilegeEscalation: false
      capabilities:
        drop: ["ALL"]
```

### Explication :

* `privileged: false` : le conteneur n‚Äôa pas acc√®s aux privil√®ges du host.
* `allowPrivilegeEscalation: false` : emp√™che l'escalade des privil√®ges via des commandes comme `sudo`.
* `capabilities.drop: ["ALL"]` : toutes les capacit√©s Linux sont supprim√©es.

---

## ‚úÖ Bonnes pratiques

* Toujours d√©sactiver l'escalade de privil√®ges si non n√©cessaire.
* Supprimer les capacit√©s Linux inutiles.
* Ex√©cuter les processus en tant qu‚Äôutilisateur non root (`runAsUser`).
* √âviter le mode `privileged` sauf cas tr√®s sp√©cifiques.