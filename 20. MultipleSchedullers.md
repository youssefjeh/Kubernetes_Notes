D'accord, simplifions Ã§a !

### Qu'est-ce qu'un planificateur (scheduler) dans Kubernetes ?

Un **planificateur** (scheduler) est le mÃ©canisme dans Kubernetes qui dÃ©cide oÃ¹ (sur quel serveur) un pod doit Ãªtre exÃ©cutÃ© dans le cluster. Kubernetes a un planificateur par dÃ©faut, le **kube-scheduler**, qui prend cette dÃ©cision.

### **"Multiple schedulers"** : plusieurs planificateurs

Dans Kubernetes, il est possible d'utiliser **plusieurs planificateurs** pour diffÃ©rents types de pods, au lieu d'un seul planificateur par dÃ©faut.

### **Pourquoi utiliser plusieurs planificateurs ?**

Imaginons que tu as plusieurs types d'applications dans ton cluster Kubernetes, et chacune a des besoins diffÃ©rents :

- **Application 1** : Une application qui a besoin de **GPU** pour fonctionner (par exemple, un modÃ¨le d'intelligence artificielle).
- **Application 2** : Une application **classique** qui n'a pas besoin de GPU, mais seulement de la mÃ©moire et du CPU.
- **Application 3** : Une application qui nÃ©cessite des ressources trÃ¨s **haut de gamme** (comme des nÅ“uds avec des capacitÃ©s spÃ©ciales).

Avec un seul planificateur, il serait difficile de gÃ©rer toutes ces applications efficacement, car le planificateur par dÃ©faut pourrait ne pas savoir comment gÃ©rer les besoins spÃ©cifiques de chaque application.

C'est lÃ  qu'interviennent les **multiples planificateurs** !

### **Comment cela fonctionne concrÃ¨tement ?**

1. **Planificateur 1 (kube-scheduler)** : C'est le planificateur par dÃ©faut. Il peut gÃ©rer les pods classiques (comme **Application 2**).
2. **Planificateur 2 (gpu-scheduler)** : Tu crÃ©es un planificateur spÃ©cial pour gÃ©rer les pods qui ont besoin de **GPU** (comme **Application 1**).
3. **Planificateur 3 (high-performance-scheduler)** : Si tu as une application avec des besoins trÃ¨s Ã©levÃ©s en termes de ressources, tu crÃ©es un autre planificateur spÃ©cialisÃ© pour Ã§a (comme **Application 3**).

### **ScÃ©nario simple**

Disons que tu as 3 types de pods dans ton cluster :

- **Pod A** : Une application qui utilise des **GPU** (par exemple, un modÃ¨le d'IA).
- **Pod B** : Une application web classique qui n'a pas besoin de GPU.
- **Pod C** : Une application nÃ©cessitant des ressources trÃ¨s puissantes.

**Comment chaque pod sera-t-il planifiÃ© ?**

1. **Pod A (GPU)** : Kubernetes verra que ce pod a besoin de GPU, alors il sera dirigÃ© vers le planificateur **gpu-scheduler**, qui choisira un nÅ“ud avec un GPU disponible.
2. **Pod B (classique)** : Il sera gÃ©rÃ© par le planificateur **par dÃ©faut (kube-scheduler)**, qui choisira un nÅ“ud classique avec des ressources CPU et mÃ©moire suffisantes.
3. **Pod C (haute performance)** : Ce pod sera dirigÃ© vers le planificateur **high-performance-scheduler**, qui choisira un nÅ“ud avec des ressources puissantes pour lui.

### En rÃ©sumÃ©

Utiliser **plusieurs planificateurs** dans Kubernetes permet de mieux gÃ©rer des applications avec des besoins spÃ©cifiques. Tu peux avoir un planificateur pour les applications classiques, un autre pour celles qui nÃ©cessitent des GPU, et un autre pour celles qui ont besoin de ressources haute performance. Cela permet de mieux rÃ©partir les applications sur le cluster selon leurs besoins.

C'est comme si tu avais diffÃ©rents chefs d'orchestre, chacun expert dans un type de musique : un pour les violons, un pour les cuivres, et un pour les percussions. Chacun choisit oÃ¹ placer chaque instrument pour obtenir la meilleure harmonie ! ðŸ˜Š



---
*Pour dire Ã  un pod d'utiliser un planificateur spÃ©cifique et pas l'autre dans Kubernetes, tu utilises des annotations dans la configuration du pod. Une annotation est un petit morceau de mÃ©tadonnÃ©es qui va spÃ©cifier quel planificateur doit Ãªtre utilisÃ© pour ce pod.*
---

### Ã‰tapes pour dire Ã  un pod quel planificateur utiliser :

1. **CrÃ©er un planificateur personnalisÃ©** : Tout d'abord, tu dois avoir un planificateur personnalisÃ© que tu as configurÃ©, comme un planificateur pour gÃ©rer les pods avec des **GPU** ou un planificateur pour les applications haute performance.

2. **Annotation du pod** : Ensuite, tu ajoutes une **annotation** dans la configuration de ton pod pour lui indiquer quel planificateur utiliser.

### Exemple de configuration d'un pod :

Imaginons que tu aies deux planificateurs :
- Le planificateur par dÃ©faut (`kube-scheduler`).
- Un planificateur personnalisÃ© pour les pods qui ont besoin de GPU, appelÃ© `gpu-scheduler`.

#### Voici comment spÃ©cifier le planificateur Ã  utiliser pour un pod :

Si tu veux que ton pod utilise le planificateur `gpu-scheduler`, tu ajouteras une annotation dans la configuration YAML de ton pod.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: gpu-pod
  annotations:
    scheduler.alpha.kubernetes.io/name: "gpu-scheduler"  # SpÃ©cifie le planificateur Ã  utiliser
spec:
  containers:
  - name: gpu-container
    image: gpu-image
```

### Explication :

- **annotations** : Ici, l'annotation `scheduler.alpha.kubernetes.io/name` indique Ã  Kubernetes quel planificateur utiliser pour ce pod. Dans cet exemple, on lui dit d'utiliser `gpu-scheduler`.
- **metadata** : La section `metadata` contient des informations supplÃ©mentaires sur le pod, comme son nom (`gpu-pod`) et les annotations (qui dÃ©finissent le planificateur).

Si tu veux qu'un pod utilise le **planificateur par dÃ©faut**, tu peux soit ne pas spÃ©cifier de planificateur (dans ce cas, Kubernetes utilise le planificateur par dÃ©faut, `kube-scheduler`), soit spÃ©cifier explicitement `kube-scheduler` comme ceci :

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: default-pod
  annotations:
    scheduler.alpha.kubernetes.io/name: "kube-scheduler"  # Utilise le planificateur par dÃ©faut
spec:
  containers:
  - name: default-container
    image: default-image
```

### Conclusion :
- Pour utiliser un planificateur personnalisÃ©, tu ajoutes une annotation dans la configuration du pod, spÃ©cifiant le nom du planificateur Ã  utiliser.
- Si tu ne mets pas cette annotation, Kubernetes utilisera le planificateur par dÃ©faut (`kube-scheduler`).

C'est aussi simple que Ã§a ! ðŸ˜Š

--> https://medium.com/@subhampradhan966/multiple-schedulers-in-kubernetes-c92d376a3eca 
