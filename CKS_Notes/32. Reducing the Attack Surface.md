### ğŸ¯ **"Reducing the Attack Surface" dans Kubernetes (K8s)**

Cela signifie **rÃ©duire toutes les faÃ§ons possibles pour un attaquant dâ€™entrer ou de compromettre un cluster Kubernetes**.

---

### ğŸ›¡ï¸ Quâ€™est-ce que lâ€™**attack surface** ?

Câ€™est lâ€™ensemble de **tous les points** oÃ¹ un attaquant pourrait :

* Sâ€™introduire dans le systÃ¨me
* Prendre le contrÃ´le dâ€™un composant
* ExÃ©cuter du code malveillant

---

### ğŸ§± Dans le contexte de **Kubernetes**, Ã§a inclut :

#### 1. ğŸ” **Limiter l'accÃ¨s Ã  l'API Server**

* Lâ€™API Server est le **cÅ“ur du cluster**.
* Il faut :

  * Restreindre l'accÃ¨s aux IP autorisÃ©es
  * Obliger lâ€™authentification (avec certificat, tokenâ€¦)
  * Utiliser **RBAC** pour limiter ce que chaque utilisateur ou service peut faire

---

#### 2. ğŸšª **Fermer les ports et services inutiles**

* Chaque composant de K8s (kubelet, etcd, etc.) expose parfois des ports rÃ©seau.
* ğŸ‘‰ Fermer ceux **non utilisÃ©s** ou **dÃ©sactiver les interfaces non sÃ©curisÃ©es** (comme le port 10250 du kubelet sans authentification).

---

#### 3. ğŸ§‘â€ğŸ’» **Limiter les droits dans les pods**

* Ne pas exÃ©cuter les containers :

  * En tant que **root**
  * Avec des **capabilitÃ©s Linux inutiles**
* Ã‰viter `hostPath`, `hostNetwork`, `hostPID` sauf si vraiment nÃ©cessaire
  (ceux-ci permettent dâ€™accÃ©der directement au systÃ¨me hÃ´te)

---

#### 4. ğŸ“¦ **ContrÃ´ler les images de containers**

* Utiliser **des images sÃ»res** et **vÃ©rifiÃ©es** (sans malware)
* Ne pas tirer directement depuis Docker Hub sans contrÃ´le
* Scanner les images pour trouver les vulnÃ©rabilitÃ©s

---

#### 5. ğŸ“ **Restreindre les volumes montÃ©s**

* Ne pas donner accÃ¨s Ã  des fichiers sensibles du systÃ¨me (comme `/etc` ou `/var/run`)
* Limiter les volumes aux dossiers vraiment nÃ©cessaires

---

#### 6. âœï¸ **Appliquer des PodSecurity Policies (ou PodSecurity Admission)**

* Pour forcer les pods Ã  **respecter des rÃ¨gles de sÃ©curitÃ©**, comme :

  * Ne pas utiliser de privilÃ¨ges Ã©levÃ©s
  * Ne pas accÃ©der Ã  lâ€™hÃ´te
  * Ne pas monter certains types de volumes

---

### âœ… En rÃ©sumÃ© :

**RÃ©duire l'attaque surface dans Kubernetes**, câ€™est :

> Supprimer ou verrouiller **tout ce qui nâ€™est pas nÃ©cessaire**,
> pour **limiter les opportunitÃ©s pour un attaquant** de compromettre le cluster.

