## ðŸ” **Contexte â€“ Pourquoi restreindre les modules du noyau ?**

MÃªme si un **pod nâ€™a pas de privilÃ¨ges**, il peut quand mÃªme **provoquer le chargement de certains modules du noyau**, comme `sctp` ou `dccp` â€” qui sont **liÃ©s Ã  des protocoles rÃ©seau** rarement utilisÃ©s.

âž¡ï¸ **ProblÃ¨me** : Ces modules peuvent contenir des **failles**, et **un attaquant** pourrait en profiter pour **exÃ©cuter du code ou causer un DoS**.

---

## ðŸŽ¯ **Objectif : Bloquer (blacklister) certains modules sensibles pour Ã©viter leur chargement**

---

## ðŸ§± Ã‰tapes expliquÃ©es une par une :

---

### â–¶ï¸ 1. Tester le chargement dâ€™un module (ex : `pcspkr`)

```bash
modprobe pcspkr
```

> ðŸ“Œ Cette commande charge manuellement un module (ici `pcspkr`, qui gÃ¨re le haut-parleur du PC).

---

### â–¶ï¸ 2. Voir quels modules sont actuellement chargÃ©s

```bash
lsmod
```

> ðŸ“‹ Cette commande liste **tous les modules du noyau actuellement actifs**.

---

### âš ï¸ Info importante :

MÃªme si tu ne charges pas manuellement `sctp` ou `dccp`, un **pod peut le faire indirectement** en utilisant un socket rÃ©seau â†’ **risque de sÃ©curitÃ©**.

---

### ðŸš« 3. CrÃ©er un fichier de blacklist

```bash
cat /etc/modprobe.d/blacklist.conf
```

Ajoute Ã  lâ€™intÃ©rieur :

```
blacklist sctp
blacklist dccp
```

> âœï¸ Ce fichier indique au systÃ¨me :
> "Ne jamais charger ces modules, mÃªme si une appli/pod le demande."

---

### ðŸ” 4. RedÃ©marrer le systÃ¨me

```bash
shutdown -r now
```

> Pour que la blacklist soit **prise en compte au redÃ©marrage**.

---

### ðŸ” 5. VÃ©rifier que les modules sont bien **non chargÃ©s**

```bash
lsmod | grep sctp
lsmod | grep dccp
```

> âœ… Si **aucun rÃ©sultat** : câ€™est bon, ils ne sont pas chargÃ©s.

---

## âœ… RÃ©sumÃ© ultra simple (pour tes notes CKS) :

> **Objectif** : empÃªcher des pods (mÃªme non privilÃ©giÃ©s) de charger des modules rÃ©seaux dangereux (`sctp`, `dccp`) via des sockets.
>
> **Solution** :
>
> 1. Ajouter `blacklist sctp` et `blacklist dccp` dans `/etc/modprobe.d/blacklist.conf`
> 2. RedÃ©marrer
> 3. VÃ©rifier avec `lsmod`
